(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{127:function(e,t,n){},131:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(12),i=n.n(c),s=n(98),o=n(18),u=function(){var e={API_HOST:"http://dbhausen.pythonanywhere.com"};return e.API_HOST="http://dbhausen.pythonanywhere.com",e},l=n(7),d=n(21),j=n.n(d),p=n(35),b=function(){var e=Object(p.a)(j.a.mark((function e(){var t,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(t=sessionStorage.getItem("csrf_token"))&&null!==t){e.next=9;break}return e.next=4,fetch("".concat(u().API_HOST,"/csrf/"),{credentials:"include"});case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,t=r.csrfToken;case 9:return null===t?t="NO_TOKEN":sessionStorage.setItem("csrf_token",t),e.abrupt("return",t);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=(n(127),n(4)),O=function(){var e=Object(p.a)(j.a.mark((function e(t,n){var r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=fetch,e.t1="".concat(u().API_HOST,"/api/v1/users/auth/login/"),e.t2=t,"POST"!==t){e.next=10;break}return e.next=6,b();case 6:e.t4=e.sent,e.t3={"Content-Type":"application/json","X-CSRFToken":e.t4},e.next=11;break;case 10:e.t3={};case 11:return e.t5=e.t3,e.t6=JSON.stringify(n),e.t7={method:e.t2,headers:e.t5,credentials:"include",body:e.t6},e.next=16,(0,e.t0)(e.t1,e.t7);case 16:return r=e.sent,e.next=19,r.json();case 19:return a=e.sent,e.abrupt("return",a.key);case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(e){var t=e.setToken,n=Object(r.useState)("d@dd.com"),a=Object(l.a)(n,2),c=a[0],i=a[1],s=Object(r.useState)("postman!!01"),o=Object(l.a)(s,2),u=o[0],d=o[1],b=function(){var e=Object(p.a)(j.a.mark((function e(n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,O("POST",{email:c,password:u});case 3:r=e.sent,t(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"login-wrapper",children:[Object(h.jsx)("h1",{children:"Please Log In"}),Object(h.jsxs)("form",{onSubmit:b,children:[Object(h.jsxs)("label",{children:[Object(h.jsx)("p",{children:"Username"}),Object(h.jsx)("input",{value:c,type:"text",onChange:function(e){return i(e.target.value)}})]}),Object(h.jsxs)("label",{children:[Object(h.jsx)("p",{children:"Password"}),Object(h.jsx)("input",{value:u,type:"password",onChange:function(e){return d(e.target.value)}})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"Submit"})})]}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("small",{children:["You are running this application in ",Object(h.jsx)("b",{children:"production"})," mode."]}),Object(h.jsx)("form",{children:Object(h.jsx)("input",{type:"hidden",defaultValue:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_NOT_SECRET_CODE})})]})]})},x=n(49),m=n(189),v=Object(x.a)({palette:{primary:{main:"#304ffe"},secondary:{main:"#009688"}}}),g=function(e){return Object(h.jsx)(m.a,{theme:v,children:e.children})},y=(n(131),n(14)),T=n(23),S=n(38),k=n(32),w=n(92),_=n(194),C=n(79),P=n(54),I=n(195),N=n(196),R=n(149),A=n(96),E=n(2),H=n(148),D=n(106),F=n(107),J=n(75),B=["decimal","float","number","dateTime-local","date","email","checkbox","text"];function L(e){var t=e.inputRef,n=e.onChange,r=Object(E.a)(e,["inputRef","onChange"]);return Object(h.jsx)(J.a,Object(T.a)(Object(T.a)({},r),{},{getInputRef:t,onChange:n,decimalScale:2,fixedDecimalScale:!0,thousandSeparator:!0,isNumericString:!0}))}function M(e){var t=e.inputRef,n=e.onChange,r=Object(E.a)(e,["inputRef","onChange"]);return Object(h.jsx)(J.a,Object(T.a)(Object(T.a)({},r),{},{getInputRef:t,onChange:n,isNumericString:!0}))}var W=function(e){var t,n=e.type,r=e.value,a=e.label;return B.includes(n)?("decimal"===n?t=L:"float"===n&&(t=M),"checkbox"===n?Object(h.jsx)(C.a,{elevation:3,children:Object(h.jsx)(H.a,{control:Object(h.jsx)(D.a,Object(T.a)(Object(T.a)({},e),{},{onClick:e.onChange,color:"primary",checked:r})),label:a})}):Object(h.jsx)(C.a,{elevation:3,variant:"elevation",children:Object(h.jsx)(F.a,Object(T.a)(Object(T.a)({},e),{},{variant:"standard",InputProps:{inputComponent:t}}))})):Object(h.jsx)(_.a,{justify:"center",children:Object(h.jsxs)(C.a,{variant:"outlined",children:["type ",n," is not implemented"]})})},q=function e(t){var n=this;Object(S.a)(this,e),this.url=void 0,this.getRows=Object(p.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n.url,{method:"GET"}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){throw console.error("no database >>> ".concat(e)),e}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),this.getColumns=Object(p.a)(j.a.mark((function e(){var t,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getMetaFields();case 2:return t=e.sent,r=t.map((function(e){return{field:e.name,headerName:e.label,type:e.colType}})),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))),this.getMetaFields=Object(p.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n.url,{method:"OPTIONS"}).then((function(e){return e.json()})).then((function(e){var t=e.actions.POST,n=[];for(var r in t){var a=t[r],c={name:r,modelType:a.type,inputType:a.type,inputShrink:!0,colType:"string",required:a.required,readOnly:a.read_only,label:a.label,width:150,value:""};switch(a.type){case"integer":c.inputType="number",c.colType="number";break;case"decimal":case"float":c.colType="number";break;case"boolean":c.inputType="checkbox",c.value=!1;break;case"datetime":c.inputType="dateTime-local",c.colType="dateTime",c.width=300;break;case"date":c.width=300;break;case"string":c.inputType="text";break;case"email":c.colType="string";break;case"file upload":c.width=300,c.colType="string"}n.push(c)}return n}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),this.url=t},K=function(e){var t=[],n=Object(r.useState)(t),a=Object(l.a)(n,2),c=a[0],i=a[1],s=Object(r.useState)([]),o=Object(l.a)(s,2),u=o[0],d=o[1],j=new q(e.url);return Object(r.useEffect)((function(){c===t&&(e.cols?i(e.cols):j.getColumns().then((function(e){i(e)})).catch((function(e){console.error(e)})),j.getRows().then((function(e){d(e)})).catch((function(e){console.error(e)})))}),[]),Object(h.jsx)("div",{children:Object(h.jsx)("div",{style:{height:400,width:"100%"},children:Object(h.jsx)(A.a,{rows:u,columns:c})})})},U=Object(k.a)((function(e){return Object(w.a)({root:{border:"1px",borderStyle:"solid",borderRadius:"4px",padding:"10px",background:"#90A4AE","& .MuiOutlinedInput-root":{margin:e.spacing(.8)},"& .MuiPaper-root":{marginLeft:e.spacing(.8),marginRight:e.spacing(.8),marginBottom:e.spacing(.8),paddingLeft:"12px",paddingRight:"10px",paddingTop:"4px",paddingBottom:"4px"}},wordwrap:{overflowWrap:"anywhere",width:"100%",color:"red"},card:{color:"red"}})})),V=function(e){var t=[],n=Object(r.useState)(t),a=Object(l.a)(n,2),c=a[0],i=a[1],s=Object(r.useState)(""),o=Object(l.a)(s,2),d=o[0],O=o[1],f=Object(r.useState)({ok:!1,statusText:"",url:""}),x=Object(l.a)(f,2),m=x[0],v=x[1],g=new q(e.url),S=U();Object(r.useEffect)((function(){c===t&&g.getMetaFields().then((function(e){i(e)})).catch((function(){}))}));var k=function(e){var t=e.target.value,n=e.target,r=n.type,a=n.id,c=n.checked,s=parseInt(a,10);i((function(e){return e.map((function(e,n){return n!==s?e:("checkbox"===r&&(t=c),Object(T.a)(Object(T.a)({},e),{},{value:t}))}))}))},w=function(){var e=Object(p.a)(j.a.mark((function e(t){var n,r,a,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=c.filter((function(e){return!e.readOnly})).map((function(e){var t={name:e.name,value:e.value};return"decimal"===e.inputType&&(t.value=t.value.replaceAll(",",""),t.value=t.value.replaceAll("$",""),t.value=t.value.replaceAll(" ",""),t.value=parseFloat(t.value)),"number"===e.inputType&&(t.value=parseInt(t.value,10)),""===t.value&&(t.value=null),t})),!A()){e.next=16;break}return r=n.reduce((function(e,t){return Object(T.a)(Object(T.a)({},e),{},Object(y.a)({},t.name,t.value))}),{}),O(JSON.stringify(r)),e.next=8,b();case 8:return e.t0=e.sent,e.t1={"Content-Type":"application/json","X-CSRFToken":e.t0},e.t2=JSON.stringify(r),a={method:"POST",headers:e.t1,body:e.t2},e.next=14,fetch("".concat(u().API_HOST,"/api/"),a);case 14:i=e.sent,v({ok:i.ok,statusText:i.statusText,url:i.url});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){return!0};return Object(h.jsx)(_.a,{direction:"column",container:!0,spacing:4,className:S.root,children:Object(h.jsxs)("form",{onSubmit:w,children:[c.map((function(e,t){return Object(h.jsx)("div",{children:e.readOnly?Object(h.jsx)(_.a,{item:!0,xs:12,children:Object(h.jsx)(C.a,{variant:"outlined",children:Object(h.jsx)("span",{children:"".concat(e.name," : ").concat(e.value)})})}):Object(h.jsx)(_.a,{item:!0,xs:12,children:Object(h.jsx)(W,{label:e.label,type:e.inputType,fullWidth:!0,value:e.value,required:e.required,onChange:k,id:t.toString(),name:e.name,InputLabelProps:{shrink:e.inputShrink}})})},e.name)})),Object(h.jsx)(_.a,{item:!0,xs:12,children:Object(h.jsx)(P.a,{variant:"contained",color:"primary",type:"submit",children:"submit"})}),Object(h.jsx)(_.a,{item:!0,xs:12,children:Object(h.jsx)(I.a,{className:S.card,children:Object(h.jsxs)(N.a,{children:[Object(h.jsx)(R.a,{color:"textPrimary",gutterBottom:!0,children:"Data sent:"}),Object(h.jsx)(R.a,{variant:"body2",component:"p",className:S.wordwrap,children:d}),Object(h.jsx)(R.a,{color:"textPrimary",gutterBottom:!0,children:"Response:"}),Object(h.jsxs)(R.a,{variant:"body2",component:"div",children:[Object(h.jsxs)(_.a,{container:!0,direction:"row",children:[Object(h.jsx)(_.a,{item:!0,xs:2,children:"Ok:"}),Object(h.jsx)(_.a,{children:m.ok.toString()})]}),Object(h.jsxs)(_.a,{container:!0,direction:"row",children:[Object(h.jsx)(_.a,{item:!0,xs:2,children:"Status Text:"}),Object(h.jsx)(_.a,{children:m.statusText})]}),Object(h.jsxs)(_.a,{container:!0,direction:"row",children:[Object(h.jsx)(_.a,{item:!0,xs:2,children:"Url:"}),Object(h.jsx)(_.a,{children:m.url})]})]})]})})})]})})},X=function(){var e=Object(r.useState)(function(){var e=sessionStorage.getItem("token");if(null!==e)return JSON.parse(e)}()),t=Object(l.a)(e,2),n=t[0],a=t[1];return{setToken:function(e){sessionStorage.setItem("token",JSON.stringify(e)),a(e)},token:n}};var G=function(){var e=X(),t=e.token,n=e.setToken;return t?Object(h.jsx)(g,{children:Object(h.jsxs)("div",{className:"wrapper",children:[Object(h.jsx)("h1",{children:"Application"}),Object(h.jsx)(s.a,{children:Object(h.jsxs)(o.c,{children:[Object(h.jsx)(o.a,{path:"/rest_grid",children:Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{children:Object(h.jsx)(K,{url:"".concat(u().API_HOST,"/api/"),cols:[{field:"myemail",width:250,headerName:"Email Address"},{field:"id"}]})}),Object(h.jsx)("div",{children:Object(h.jsx)(K,{url:"".concat(u().API_HOST,"/api/")})})]})}),Object(h.jsx)(o.a,{path:"/rest_form",children:Object(h.jsx)(V,{url:"".concat(u().API_HOST,"/api/")})})]})})]})}):Object(h.jsx)(f,{setToken:n})};n(142);i.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(G,{})}),document.getElementById("root"))}},[[143,1,2]]]);
//# sourceMappingURL=main.b1c98306.chunk.js.map